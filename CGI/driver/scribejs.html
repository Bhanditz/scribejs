<!DOCTYPE html>
<html>
 <head>
    <meta content="text/html; charset=UTF-8" http-equiv="Content-Type">
    <title>Generate Markdown Formatted Minutes</title>
    <meta content="Ivan Herman" name="author">
    <link rel="stylesheet" type="text/css" href="/StyleSheets/base.css">
    <link rel="stylesheet" type="text/css" href="style/scribejs.css">
    <script type="text/javascript" src="https://www.w3.org/scripts/underscore/1.8/underscore-min.js"></script>
    <script type="text/javascript" src="presets.js"></script>
 </head>
 <body>
    <h1>Generate Markdown Formatted Minutes</h1>

    <p>This is a browser based interface to service that converts the IRC logs generated by <a href="https://www.w3.org/2002/03/RRSAgent">RRSAgent</a> into minutes in Markdown. The underlying <a href="https://github.com/w3c/scribejs/">tool</a> is based on a Node.js converter; this page provides a somewhat simpler interface than the complete command-line tool (see <a href="https://github.com/w3c/scribejs/blob/master/README.md">for the complete description</a>). A more detailed description of the options is available <a href="#explanation">below</a>. The generated Markdown minutes will either be displayed on the screen. Note that the scribing features defined by <a href="https://dev.w3.org/2002/scribe/scribedoc.htm">David Booth’s script</a> are mostly maintained with some minor additions; see the separate <a href="https://github.com/w3c/scribejs/blob/master/features.md">feature description</a> for those.</p>

    <p>To identify the IRC log one can (in priority order):</p>

    <ol>
        <li>Provide a textual IRC log. If this is not available, then</li>
        <li>…upload a IRC log file. If this is not available, then</li>
        <li>…give a date of the meeting, which is used to extract the IRC log from the W3C Web site.</li>
    </ol>

    <p>The form can be populated with presets or filled in by hand. (A “preset” is a storage, in the browser’s Web Storage, of the content of the form. This means that the values remain available on a per-browser basis and stay in the client. Use the <a href="#manage_presets">the form below</a> to manage those.)</p>

    <p>
        <label for="presets">Choose a preset:</label>
        <select name="presets" id="presets" onchange="set_presets(this.value)" style="width: 20em">
            <option value="None" selected>None</option>
        </select>
    </p>

    <hr>

    <form id="main_form" enctype="multipart/form-data" method="post" action="http://localhost:8001/cgi-bin/scribe">
        <p class="submit_button">
            <input title="Submit for minute generation" value="Generate minutes" type="submit">
            <input title="Reset form" value="Reset form" type="reset" onclick="reset_preset_menu();">
        </p>
        <fieldset id="group_data">
            <legend>Group data</legend>
            <div class="main-options">
                <table>
                    <tbody>
                        <tr>
                            <th><label for="group">IRC channel:</label></th>
                            <td><input name="group" id="group" size="70" type="text"></td>
                        </tr>
                        <tr>
                            <th><label for="nicknames">Nickname file name or URL:</label></th>
                            <td><input name="nicknames" id="nicknames" size="70" type="text"></td>
                        </tr>
                        <tr>
                            <th><label for="jekyll">Adapt the output to Jekyll:</label></th>
                            <td>
                                <select id="jekyll" name="jekyll" size="1" style="width:13em">
                                    <option selected="selected" value="none">No</option>
                                    <option value="md">Yes, using Markdown</option>
                                    <option value="kd">Yes, using Kramdown</option>
                                </select>
                            </td>
                        </tr>
                        <tr>
                            <th><label for="final">Are the minutes final:</label></th>
                            <td>
                                <select id="final" name="final" size="1">
                                    <option selected="selected" value="false">No</option>
                                    <option value="true">Yes</option>
                                </select>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </fieldset>
        <fieldset id="irc_options">
            <legend>IRC log</legend>
            <div class="main-options">
                <table>
                    <tbody>
                        <tr>
                            <th><label for="text">IRC log textually:</label></th>
                            <td><textarea id="text" name="irclog_text" rows="15" cols="90"></textarea></td>
                        </tr>
                        <tr>
                            <th><label for="uploaded">Local file to upload:</label></th>
                            <td ><input name="irclog_file" id="uploaded" type="file" width="40"></td>
                        </tr>
                        <tr>
                            <th><label for="date">Date:</label></th>
                            <td><input name="date" id="date" size="70" type="date"></td>
                        </tr>
                        <tr>
                            <th>
                                <label for="irclog">Load the irc log (based on the date) to the text input area?</label>
                            </th>
                            <td>
                                <input class="load" type="button" id="irclog" name="irclog" value="load" onclick="load_log();">
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </fieldset>
        <!-- <fieldset id="gh_options">
            <legend>Github Repository Options</legend>
            <div class="main-options">
                <table>
                    <tbody>
                        <tr>
                            <th><label for="torepo">Upload result to Github:</label></th>
                            <td>
                                <select id="torepo" name="torepo" size="1">
                                    <option selected="selected" value="false">No</option>
                                    <option value="true">Yes</option>
                                </select>
                            </td>
                        </tr>
                        <tr>
                            <th><label for="ghrepo">Name:</label></th>
                            <td><input name="ghrepo" id="ghrepo" size="70" type="text"></td>
                        </tr>
                        <tr>
                            <th><label for="ghpath">Path:</label></th>
                            <td><input name="ghpath" id="ghpath" size="70" type="text"></td>
                        </tr>
                        <tr>
                            <th><label for="ghbranch">Branch:</label></th>
                            <td><input name="ghbranch" id="ghbranch" size="70" type="text"></td>
                        </tr>
                        <tr>
                            <th><label for="ghname">GH User name:</label></th>
                            <td><input name="ghname" id="ghname" size="70" type="text"></td>
                        </tr>
                        <tr>
                            <th><label for="ghemail">GH User email:</label></th>
                            <td><input name="ghemail" id="ghemail" size="70" type="email"></td>
                        </tr>
                        <tr>
                            <th><label for="ghtoken">GH User token:</label></th>
                            <td><input name="ghtoken" id="ghtoken" size="70" type="password"></td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </fieldset> -->
    </form>

    <hr />

    <fieldset id="manage_presets">
        <legend>Manage Presets</legend>
        <div class="main-options">
            <table>
                <tbody>
                    <tr>
                        <th><label for="fullname">Group's full name:</label></th>
                        <td><input id="fullname" name="fullname" id="fullname" size="50" type="text"></td>
                    </tr>
                    <tr>
                        <th><label for="store_preset">Store Preset:</label></th>
                        <td><input class="preset_control" id="store_preset" name="store_preset" value="Store" type="button" onclick="store_preset();"></td>
                    </tr>
                    <tr>
                        <th><label for="remove_preset">Remove Preset:</label></th>
                        <td><input class="preset_control" id="remove_preset" name="remove_preset" value="Remove" type="button" onclick="remove_preset();"></td>
                    </tr>
                    <tr>
                        <th><label for="clear_presets">Remove All Presets:</label></th>
                        <td><input class="preset_control" id="clear_presets" name="clear_presets" value="Clear" type="button" onclick="clear_presets();"></td>
                    </tr>
                    <!-- <tr>
                        <th><label for="list_presets">@List All Presets@:</label></th>
                        <td><input class="preset_control" id="list_presets" name="list_presets" value="List" type="button" onclick="list_presets();"></td>
                    </tr> -->
                </tbody>
            </table>

        </div>
    </fieldset>

    <hr>

    <h2 id="explanation">Description of the options</h2>

    <p>The options mostly map onto flags available for the <a href="https://github.com/w3c/scribejs/blob/master/README.md">command-line version</a> of the tool. Note that not all features are available: most notably it is not possible, at this moment, to use GitHub related options. (This would require the transfer of the OAUTH personal access token over the wire, which may lead to security risks.)</p>

    <p>The form options are as follows.</p>

    <dl>
        <dt>Group data</dt>
        <dd>
            <dl>
                <dt>IRC channel</dt>
                <dd>The name of the IRC channel (without the &amp; or the # sign). Used to identify the URL of the IRC log on the W3C space.</dd>

                <dt>Nickname file name or URL</dt>
                <dd>Identify a JSON data file providing a mapping from IRC nicknames to real names. Used to display the participants’ proper name everywhere in the minutes. See <a href="https://github.com/w3c/scribejs/blob/master/README.md#nickname-mapping">the more detailed description</a> for further details.</dd>

                <dt>Are the minutes final</dt>
                <dd>By default, minutes are considered as “draft”, and labeled as such. This may be important for groups that follow the procedure to “finalize” the minutes only after a 5 days’ period when resolutions may be objected to. If the minutes are labeled as “final”, no such extra notice is added to the minutes.</dd>

                <dt>Adapt the output to Jekyll</dt>
                <dd>If the generated minutes are part of a Web site served on GitHub via a <a href="https://help.github.com/articles/about-github-pages-and-jekyll/">Github+Jekyll</a> combination, then this flag provides some useful additions and/or alternatives. See <a href="https://github.com/w3c/scribejs/blob/master/README.md#Jekylloption">the more detailed description</a> for further details. </dd>
            </dl>
        </dd>

        <dt>IRC log</dt>
        <dd>
            <dl>
                <dt>IRC log textually</dt>
                <dd>Provide the IRC log textually.</dd>

                <dt>Local file to upload</dt>
                <dd>Load a file locally.</dd>

                <dt>Date</dt>
                <dd>In case the date is not “today”, provide a date for the minutes. If the previous two options are empty, the log is loaded from W3C’s “date space” following the patterns used by RRSAgent.</dd>

                <dt>Load the irc log (based on the date) to the text input area?</dt>
                <dd>Locate the IRC log based on the date and, instead of generating the minutes, load the content into the text editing area corresponding to the textual input; this can then be used to generate the minutes. This option is useful if it is necessary to make small adjustments on the IRC log to improve the quality of the minutes.
                </dd>
            </dl>
        </dd>

        <dt>Manage Presets</dt>
        <dd>
            <dl>
                <dt>Group’s full name</dt>
                <dd>This is not used in the generated minutes; instead, it is a pure mnemonic name that is used to identify an entry when choosing a preset.</dd>

                <dt>Store Preset</dt>
                <dd>Store a preset into the browser’ local storage. Note that the preset is identifed based on the IRC channel name; if an entry with that name is already in the local storage, it is overwritten.</dd>

                <dt>Remove Preset</dt>
                <dd>Remove a preset from the browser’ local storage. The preset is identifed based on the IRC channel name.</dd>

                <dt>Remove All Presets</dt>
                <dd>Remove all presets from the browser’ local storage.</dd>
            </dl>
        </dd>
    </dl>
 </body>
</html>
