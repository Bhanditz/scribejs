<!DOCTYPE html>
<html data-lt-installed="true">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>Generate Markdown Formatted Minutes</title>
    <meta content="Ivan Herman" name="author">
    <link rel="stylesheet" href="https://www.w3.org/People/Ivan/StyleSheets/mystyle-2019.css">
    <link rel="stylesheet" type="text/css" href="css/scribejs.css">
    <script type="text/javascript" src="js/scribejs.js"></script>
 </head>
 <body>
    <h1>Generate Markdown Formatted Minutes</h1>

    <details>
        <summary>Description</summary>
        <p>
            This is a browser based interface to service that converts the IRC logs generated by <a href="https://www.w3.org/2002/03/RRSAgent">RRSAgent</a> into minutes in Markdown. The underlying <a href="https://github.com/w3c/scribejs/">tool</a> is based on a Node.js converter; this page provides a somewhat simpler interface than the complete command-line tool (see <a href="https://github.com/w3c/scribejs/blob/master/README.md">for the complete description</a>). A more detailed description of the options is available <a href="#explanation">below</a>. The generated Markdown minutes will be displayed on the screen and can be saved locally.
        </p>

        <p>
            Note that the scribing features defined by <a href="https://dev.w3.org/2002/scribe/scribedoc.htm">David Booth’s script</a> are mostly maintained with some minor additions; see the separate <a href="https://github.com/w3c/scribejs/blob/master/features.md">feature description</a> for those.</p>
        </p>

        <p>To identify the IRC log one can:</p>

        <ol>
            <li>Provide a textual IRC log.</li>
            <li>Upload a IRC log file from your local disc.</li>
            <li>Give the exact date and IRC channel name of the meeting, fetch the IRC log from the W3C Web site.<br/>
                Note that this works for public IRC logs only. At this moment the script is not (yet) prepared to properly handle access control.
            </li>
        </ol>

        <p>
            The form can be populated with presets or filled in by hand. (A “preset” an item in the browser’s Web Storage of the content of the form. The values remain available on a per-browser basis and stay in the client. Use the <a href="#manage_presets">the form below</a> to manage those.)
        </p>

    </details>

    <p>
        <label for="presets">Choose a preset:</label>
        <select name="presets" id="presets" style="width: 20em">
            <option value="None" selected="True">None</option>
        </select>
    </p>

    <hr>

    <form id="main_form">
        <fieldset id="group_data">
            <legend>Group data</legend>
            <div class="main-options">
                <table>
                    <tbody>
                        <tr>
                            <th><label for="group">IRC channel:</label></th>
                            <td><input name="group" id="group" size="70" type="text"></td>
                        </tr>
                        <tr>
                            <th><label for="nicknames">Nickname file name or URL:</label></th>
                            <td><input name="nicknames" id="nicknames" size="70" type="text"></td>
                        </tr>
                        <tr>
                            <th><label for="jekyll">Adapt the output to Jekyll:</label></th>
                            <td>
                                <select id="jekyll" name="jekyll" size="1" style="width:13em">
                                    <option selected="selected" value="none">No</option>
                                    <option value="md">Yes, using Markdown</option>
                                    <option value="kd">Yes, using Kramdown</option>
                                </select>
                            </td>
                        </tr>
                        <tr>
                            <th><label for="final">Are the minutes final:</label></th>
                            <td>
                                <select id="final" name="final" size="1">
                                    <option selected="selected" value="false">No</option>
                                    <option value="true">Yes</option>
                                </select>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </fieldset>
        <fieldset id="irc_options">
            <legend>IRC log</legend>
            <div class="main-options">
                <table>
                    <tbody>
                        <tr>
                            <th><label for="text">IRC log:</label></th>
                            <td><textarea id="text" name="irclog_text" rows="15" cols="90"></textarea></td>
                        </tr>
                        <tr>
                            <th><label for="uploaded">Local file to upload:</label></th>
                            <td><input name="irclog_file" id="upload_log" type="file" width="40"></td>
                        </tr>
                        <tr>
                            <th><label for="date">Date:</label></th>
                            <td><input name="date" id="date" size="70" type="date"></td>
                        </tr>
                        <tr>
                            <th>
                                <label for="irclog">Log fetched from W3C:</label>
                            </th>
                            <td>
                                <input class="load" type="button" id="fetch_log" name="irclog" value="fetch">
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </fieldset>
        <p class="submit_button">
            <input title="Submit for minute generation" id="submit_button" value="Generate minutes" type="button">
            <input title="Reset form" id="reset" value="Reset form" type="button">
        </p>
    </form>

    <fieldset id='minutes_frame'>
        <legend>Generated Minutes</legend>
        <div class="main-options">
            <table>
                <tbody>
                    <tr>
                        <th><label for="minutes">Generated Minutes:</label></th>
                        <td><textarea name="minutes" id="minutes" cols="100" rows="20"></textarea></td>
                    </tr>
                    <tr>
                        <th>&nbsp;</th>
                        <td>
                            <input title='save' id='save' value='Save' type='button'>&nbsp;
                            <a style='display:none' id='download'>test</a>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </fieldset>


    <fieldset id="manage_presets">
        <legend>Manage Presets</legend>
        <div class="main-options">
            <table>
                <tbody>
                    <tr>
                        <th><label for="fullname">Group's full name:</label></th>
                        <td><input id="fullname" name="fullname" size="50" type="text"></td>
                    </tr>
                    <tr>
                        <th><label for="store_preset">Store Preset:</label></th>
                        <td><input class="preset_control" id="store_preset" name="store_preset" value="Store" type="button"></td>
                    </tr>
                    <tr>
                        <th><label for="remove_preset">Remove Preset:</label></th>
                        <td><input class="preset_control" id="remove_preset" name="remove_preset" value="Remove" type="button"></td>
                    </tr>
                    <tr>
                        <th><label for="clear_presets">Remove All Presets:</label></th>
                        <td><input class="preset_control" id="clear_presets" name="clear_presets" value="Clear" type="button"></td>
                    </tr>
                </tbody>
            </table>
        </div>
    </fieldset>

    <hr>

    <h2 id="explanation">Description of the options</h2>

    <p>
        The options mostly map onto flags available for the <a href="https://github.com/w3c/scribejs/blob/master/README.md">command-line version</a> of the tool. Note that not all features are available: most notably it is not (yet?) possible, at this moment, to use GitHub related facilities.
    </p>

    <p>The form options are as follows.</p>

    <dl>
        <dt>Group data</dt>
        <dd>
            <dl>
                <dt>IRC channel</dt>
                <dd>
                    The name of the IRC channel (without the # sign). Used for the URL of the IRC log on the W3C site.
                </dd>

                <dt>Nickname file name or URL</dt>
                <dd>
                    Identify a JSON data file providing a mapping from IRC nicknames to real names. Used to display the participants’ proper name everywhere in the minutes. See <a href="https://github.com/w3c/scribejs/blob/master/README.md#nickname-mapping">the more detailed description</a> for further details.
                </dd>

                <dt>Adapt the output to Jekyll</dt>
                <dd>
                    If the generated minutes are part of a Web site served on GitHub via a <a href="https://help.github.com/articles/about-github-pages-and-jekyll/">Github+Jekyll</a> combination, then this flag provides some useful additions and/or alternatives. See <a href="https://github.com/w3c/scribejs/blob/master/README.md#Jekylloption">the more detailed description</a> for further details.
                </dd>

                <dt>Are the minutes final</dt>
                <dd>
                    By default, minutes are considered as “draft”, and labeled as such. This may be important for groups that follow the procedure to “finalize” the minutes only after a 5 days’ period when resolutions may be objected to. If the minutes are labeled as “final”, no such extra notice is added to the minutes.
                </dd>
            </dl>
        </dd>

        <dt>IRC log</dt>
        <dd>
            <dl>
                <dt>IRC log</dt>
                <dd>Text box containing the IRC log. The user can also edit this text; it is <em>the</em> log to be transformed.</dd>

                <dt>Local file to upload</dt>
                <dd>Load a file locally.</dd>

                <dt>Date</dt>
                <dd>
                    In case the date is not “today”, provide a date for the minutes. If the log is loaded from W3C’s “date space”, this value is used to create a URL that follows the patterns used by RRSAgent.
                </dd>

                <dt>Log fetched from W3C</dt>
                <dd>
                    When activating the button, the system fetches the log from the W3C “date space” and copies the content into the text field.
                </dd>
            </dl>
        </dd>

        <dt>Generated minutes</dt>
        <dd>
            <dl>
                <dt>Generated Minutes</dt>
                <dd>
                    Text box containing the generated Markdown minutes. The user can also edit this text; it is <em>the</em> content to be saved.
                </dd>

                <dt>Save</dt>
                <dd>
                    Save the file in the local file system.
                </dd>
            </dl>
        </dd>

        <!-- <dt>Github Repository Options</dt>
        <dd>
            <dl>
                <dt>Upload results to Github</dt>
                <dd>Whether the resulting minutes should be uploaded to github automatically or returned to the browser</dd>

                <dt>Name</dt>
                <dd>Name of the repository, e.g., <code>w3c/publ-wg</code> </dd>

                <dt>Path</dt>
                <dd>Path of the folder within the repository where the minutes should be stored (without starting or trailing slash characters). Minutes are stored using the <code>Minutes-[date].md</code></dd>

                <dt>Branch</dt>
                <dd>Git branch to be used (defaults to <code>master</code>)</dd>
            </dl>

            <p>
                Note, however, that there are private information that <em>cannot</em> be set through this interface, namely the name, email address, and the OAUTH key (see for a <a href="https://github.com/w3c/scribejs/blob/master/README.md#conf">description</a> of those). These must be installed by the system administrator in a <code>CGI-executable/.scribejs.json</code> file, following the syntax <a href="https://github.com/w3c/scribejs/blob/master/README.md#conf">of the configuration files</a>.
            </p>
        </dd> -->

        <dt>Manage Presets</dt>
        <dd>
            <dl>
                <dt>Group’s full name</dt>
                <dd>
                    This is not used in the generated minutes; instead, it is a purely mnemonic name used to identify an entry when choosing a preset.
                </dd>

                <dt>Store Preset</dt>
                <dd>
                    Store a preset into the browser’ local storage. Note that the preset is identified with the IRC channel name; if an entry with that name already exists in the local storage, it is overwritten.
                </dd>

                <dt>Remove Preset</dt>
                <dd>
                    Remove a preset from the browser’ local storage. The preset is identified with the IRC channel name.
                </dd>

                <dt>Remove All Presets</dt>
                <dd>Remove all presets from the browser’ local storage.</dd>
            </dl>
        </dd>
    </dl>


</body></html>
